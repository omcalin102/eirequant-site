import{j as s}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.CQ95-tCy.js";const j=()=>(document.querySelector("base")?.getAttribute("href")||"/").replace(/\/+$/,"/");async function u(a){const e=j()+a.replace(/^\//,"");try{const t=await fetch(e,{cache:"no-cache"});return t.ok?await t.json():null}catch{return null}}const o=(a,e=3)=>typeof a=="number"&&isFinite(a)?a.toFixed(e):"�",n=(...a)=>{for(const e of a){const t=Number(e);if(Number.isFinite(t))return t}return null};function k(a){if(!a||typeof a!="object")return{delta:null,gamma:null,vega:null,theta:null};const e={...a,...a.portfolio,...a.stats,...a.summary};return{delta:n(e.delta,e.Delta,e.beta,e.beta_median,e.delta_median),gamma:n(e.gamma,e.Gamma,e.gamma_median),vega:n(e.nu,e.Vega,e.vega,e.vega_median),theta:n(e.theta,e.Theta,e.theta_median)}}function y(a){if(!a)return{delta:null,gamma:null,vega:null,theta:null};const e=Array.isArray(a?.proxies)?a.proxies:Array.isArray(a)?a:[a],t=e.length?e[e.length-1]:null;return t?{delta:n(t.delta,t.Delta),gamma:n(t.gamma,t.Gamma),vega:n(t.nu,t.Vega,t.vega),theta:n(t.theta,t.Theta)}:{delta:null,gamma:null,vega:null,theta:null}}function w(){const[a,e]=r.useState(null),[t,d]=r.useState(null),[g,h]=r.useState(null),[v,x]=r.useState(null),[f,p]=r.useState(null);return r.useEffect(()=>{(async()=>{const m=(await u("/data/latest.json"))?.date??null;e(m);let l={delta:null,gamma:null,vega:null,theta:null};if(m){const i=await u(`/data/daily/${m}/risk_greeks.json?v=${encodeURIComponent(m)}`);l=k(i)}if([l.delta,l.gamma,l.vega,l.theta].some(i=>i===null)){const i=await u("/data/models/eqx-m1/greek_proxies.json"),c=y(i);l={delta:l.delta??c.delta,gamma:l.gamma??c.gamma,vega:l.vega??c.vega,theta:l.theta??c.theta}}d(l.delta),h(l.gamma),x(l.vega),p(l.theta)})()},[]),s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"greek-grid","aria-live":"polite",children:[s.jsxs("div",{className:"greek-box",children:[s.jsx("div",{className:"greek-sym",children:"Delta"}),s.jsx("div",{className:"greek-val",children:o(t)})]}),s.jsxs("div",{className:"greek-box",children:[s.jsx("div",{className:"greek-sym",children:"Gamma"}),s.jsx("div",{className:"greek-val",children:o(g)})]}),s.jsxs("div",{className:"greek-box",children:[s.jsx("div",{className:"greek-sym",children:"Vega"}),s.jsx("div",{className:"greek-val",children:o(v)})]}),s.jsxs("div",{className:"greek-box",children:[s.jsx("div",{className:"greek-sym",children:"Theta"}),s.jsx("div",{className:"greek-val",children:o(f)})]})]}),s.jsxs("div",{className:"muted note",children:["Daily medians where available; otherwise model proxies.",s.jsx("button",{type:"button",className:"help-dot","data-tip":"Greeks summarise portfolio exposures; values prefer daily medians, falling back to model proxies.",children:"?"}),s.jsx("span",{className:"card-sub",children:a??"�"})]})]})}export{w as default};

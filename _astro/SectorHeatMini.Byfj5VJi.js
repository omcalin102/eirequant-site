import{j as n}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.CQ95-tCy.js";import{g as y,b as g}from"./api.BFLoCgOV.js";const s=e=>typeof e=="number"&&isFinite(e)?e:null,f=e=>typeof e=="string"&&!/^unk/i.test(e.trim());function m(e){return typeof e?.contribution=="number"?e.contribution:typeof e?.omega=="number"?Math.log(Math.max(1e-9,e.omega)):typeof e?.median_beta=="number"?-e.median_beta:typeof e?.ret=="number"?e.ret:typeof e?.score=="number"?e.score:typeof e?.value=="number"?e.value:0}function j(){const[e,d]=o.useState(null),[c,p]=o.useState(null);o.useEffect(()=>{(async()=>{const a=await y(),{daily:t,modelPerf:i}=await g(a,"eqx-m1");d(t??null),p(i??null)})()},[]);const l=o.useMemo(()=>{if(e){const t=Array.isArray(e.sectors)?e.sectors.map(r=>({name:r.sector??r.name??"�",badge:r.top_names?.[0]?.symbol??"",metric:s(r.median_beta),metricLabel:"Beta",_score:m(r)})):[],i=Array.isArray(e.leaders)?e.leaders.map(r=>({name:r.sector??r.name??"�",badge:"",metric:s(r.score??r.value),metricLabel:"Score",_score:m(r)})):[],u=[...t,...i].filter(r=>f(r.name));if(u.length)return u.sort((r,b)=>b._score-r._score).slice(0,8)}return(Array.isArray(c?.sectors)?c.sectors.map(t=>({name:t.sector??t.name??"�",badge:"",metric:s(t.omega??t.contribution??t.ret??t.score),metricLabel:typeof t.omega=="number"?"Omega":"Contrib",_score:m(t)})):[]).filter(t=>f(t.name)).sort((t,i)=>i._score-t._score).slice(0,8)},[e,c]);return l.length?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"pill-grid two-col","aria-live":"polite",children:l.map((a,t)=>n.jsxs("div",{className:"chip chip-row",children:[n.jsxs("span",{className:"kv-key",children:[a.name,a.badge?n.jsx("em",{className:"badge","aria-label":"example ticker",style:{marginLeft:".4rem"},children:a.badge}):null]}),n.jsxs("span",{className:"muted kv-val",children:[a.metricLabel," ",typeof a.metric=="number"?a.metric.toFixed(2):"�"]})]},t))}),n.jsx("style",{children:`
        .chip-row{ display:flex; align-items:center; justify-content:space-between; gap:.6rem; }
        .kv-key{ flex:1; min-width:0; font-weight:600; }
        .kv-val{ white-space:nowrap; }
      `})]}):n.jsx("div",{className:"muted",children:"No sector data."})}export{j as default};

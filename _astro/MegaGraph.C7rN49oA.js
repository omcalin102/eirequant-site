import{j as a}from"./jsx-runtime.D_zvdyIk.js";import{r as u}from"./index.CQ95-tCy.js";const U=[{key:"25y",label:"25y"},{key:"5y_1",label:"5y_1"},{key:"5y_3",label:"5y_3"},{key:"5y_4",label:"5y_4"},{key:"5y_5",label:"5y_5"},{key:"last_1y",label:"last_1y"},{key:"last_3m",label:"last_3m"},{key:"last_1m",label:"last_1m"},{key:"last_1w",label:"last_1w"}],Z=[{key:"eqx-m1",label:"EQX-M1"}],ee=[{key:"pid",label:"PID"},{key:"baseline",label:"Baseline"}],te=[{key:"spx",label:"S&P 500 (SPX)"}],ae=()=>(document.querySelector("base")?.getAttribute("href")||"/").replace(/\/+$/,"/"),ne=n=>n.replace(/([^:]\/)\/+/g,"$1");function re(n){return ne(`${ae()}data/models/eqx-m1/equity/equity_${n}.json`)}async function se(n){try{const l=await fetch(n,{cache:"no-cache"});return l.ok?await l.json():null}catch{return null}}const le=n=>typeof n=="number"?n:+new Date(n)||0;function J(n){if(!n||n.length<3)return{cagr:"—",vol:"—",sharpe:"—",mdd:"—"};const l=n.map(s=>s[1]),o=l.at(-1)/l[0]-1,y=Math.max(1,n.length/252),c=Math.pow(1+o,1/y)-1,p=[];for(let s=1;s<l.length;s++)p.push(l[s]/l[s-1]-1);const b=p.reduce((s,w)=>s+w,0)/p.length,j=Math.sqrt(p.reduce((s,w)=>s+(w-b)**2,0)/Math.max(1,p.length-1))*Math.sqrt(252),g=j?b*252/j:0;let S=l[0],i=0;for(const s of l)S=Math.max(S,s),i=Math.min(i,s/S-1);const M=s=>(s*100).toFixed(2)+"%";return{cagr:M(c),vol:M(j),sharpe:g.toFixed(2),mdd:M(i)}}function K(n,l){if(!n?.x||!Array.isArray(n.series))return null;const o=n.series.find(c=>c.key.toLowerCase()===l.toLowerCase());if(!o||!Array.isArray(o.y))return null;const y=n.x.map(le);return y.length!==o.y.length?null:y.map((c,p)=>[c,+o.y[p]])}const ie={pid:{title:"EQX-M1 PID",body:`EQX-M1 on the PID path prioritizes risk control and capital discipline. Across the long window shown it compounds at roughly 7.1 percent with about 14.5 percent annualized volatility. The maximum drawdown is about 35 percent, materially shallower than the S&P 500 history in the same window, and the Sharpe ratio sits around 0.54. The series demonstrates consistent participation in advancing markets while reducing exposure during stress, which is visible in the smoother path and narrower distribution of returns.

The main tradeoff is headline return versus the index. The S&P 500 prints a higher long run CAGR near 13.9 percent with a Sharpe of about 0.61, albeit with much higher volatility and deeper historical losses. For allocators, PID suits mandates that value stability and controlled downside while still seeking equity growth. The weakness to acknowledge is that in powerful trending bull legs the PID path will typically trail the benchmark.`},baseline:{title:"EQX-M1 Baseline",body:`The Baseline path aims for a modestly higher growth rate while maintaining risk control. It delivers about 8.3 percent CAGR with roughly 16.2 percent volatility, a maximum drawdown near 36 percent, and a Sharpe ratio close to 0.57. Compared with the index, the series retains a clear advantage on depth of losses and path stability while improving on the PID return profile.

The cost is slightly higher variability than PID and continued underperformance versus the S&P 500 during extended risk on phases. In a policy context, Baseline serves as the growth leaning expression of the model, while PID remains the more defensive expression. The combination allows portfolio construction to target a desired mix of compounding and drawdown control without relying on regime calls.`}};function de(){const[n,l]=u.useState("25y"),[o,y]=u.useState("eqx-m1"),[c,p]=u.useState("pid"),[b,j]=u.useState("spx"),[g,S]=u.useState(null),[i,M]=u.useState([]),s=u.useRef(null),w=u.useRef(null);u.useEffect(()=>{(async()=>{const t=await se(re(n));S(t)})()},[n]),u.useEffect(()=>{if(!g)return;const t=[];if(o==="eqx-m1"){const d=K(g,c);d&&t.push({name:`EQX-M1 (${c==="pid"?"PID":"Baseline"})`,data:d,color:"#111"})}if(b==="spx"){const d=K(g,"spx");d&&t.push({name:"S&P 500 (SPX)",data:d,color:"#1a4fb0"})}M(t)},[g,o,c,b]),u.useEffect(()=>{const t=s.current,d=w.current;if(!t||!d)return;const e=t.getContext("2d");if(!e)return;function B(){const v=Math.max(640,Math.min(1100,Math.floor(d.clientWidth))),h=380;if(t.width=v,t.height=h,e.clearRect(0,0,v,h),!i.length){e.fillStyle="#777",e.font="12px Inter, system-ui, sans-serif",e.fillText("No data available for this selection.",14,24);return}const x=60,R=16,D=24,k=48,N=i.flatMap(r=>r.data.map(m=>m[0])),W=i.flatMap(r=>r.data.map(m=>m[1])),E=Math.min(...N),q=Math.max(...N),I=Math.min(...W),z=Math.max(...W),Q=r=>x+(r-E)/Math.max(1,q-E)*(v-x-R),Y=r=>h-k-(r-I)/Math.max(1e-9,z-I)*(h-D-k);e.strokeStyle="#e8e8e8",e.lineWidth=1,e.beginPath(),e.moveTo(x,h-k),e.lineTo(v-R,h-k),e.stroke(),e.beginPath(),e.moveTo(x,D),e.lineTo(x,h-k),e.stroke(),e.fillStyle="#555",e.font="11px Inter, system-ui, sans-serif";const L=4;for(let r=0;r<=L;r++){const m=I+r*(z-I)/L,f=Y(m);e.strokeStyle="#f2f2f2",e.beginPath(),e.moveTo(x,f),e.lineTo(v-R,f),e.stroke(),e.fillStyle="#666",e.fillText(m.toFixed(1)+"x",8,f+4)}let $=new Date(E).getFullYear();const G=new Date(q).getFullYear();e.fillStyle="#666";for(let r=$;r<=G;r+=Math.ceil((G-$)/6)||1){const m=+new Date(r,0,1),f=Q(Math.min(Math.max(m,E),q));e.strokeStyle="#f2f2f2",e.beginPath(),e.moveTo(f,D),e.lineTo(f,h-k),e.stroke(),e.fillText(String(r),f-10,h-24)}e.fillStyle="#333",e.font="12px Inter, system-ui, sans-serif",e.fillText("Date",v/2-16,h-10),e.save(),e.translate(16,h/2),e.rotate(-Math.PI/2),e.fillText("Equity (normalized multiple)",-90,0),e.restore(),i.forEach(r=>{e.beginPath(),r.data.forEach((m,f)=>{const O=Q(m[0]),V=Y(m[1]);f?e.lineTo(O,V):e.moveTo(O,V)}),e.strokeStyle=r.color,e.lineWidth=2,e.stroke()});let A=x,H=D-8;i.forEach(r=>{e.fillStyle=r.color,e.fillRect(A,H-3,22,3),e.fillStyle="#333",e.fillText(r.name,A+28,H),A+=28+e.measureText(r.name).width+16})}B();const F=new ResizeObserver(B);return F.observe(d),()=>F.disconnect()},[i]);const _=i.find(t=>t.name.startsWith("EQX-M1")),X=i.find(t=>t.name.includes("S&P 500")),P=_?J(_.data):{cagr:"—",vol:"—",sharpe:"—",mdd:"—"},T=X?J(X.data):null,C=o==="eqx-m1"?ie[c]:null;return a.jsxs("div",{ref:w,className:"mg",children:[a.jsxs("div",{className:"bar",children:[a.jsxs("label",{children:["Window",a.jsx("select",{value:n,onChange:t=>l(t.target.value),children:U.map(t=>a.jsx("option",{value:t.key,children:t.label},t.key))})]}),a.jsxs("label",{children:["Model",a.jsx("select",{value:o,onChange:t=>y(t.target.value),children:Z.map(t=>a.jsx("option",{value:t.key,children:t.label},t.key))})]}),a.jsxs("label",{children:["Path",a.jsx("select",{value:c,onChange:t=>p(t.target.value),children:ee.map(t=>a.jsx("option",{value:t.key,children:t.label},t.key))})]}),a.jsxs("label",{children:["Benchmark",a.jsx("select",{value:b,onChange:t=>j(t.target.value),children:te.map(t=>a.jsx("option",{value:t.key,children:t.label},t.key))})]})]}),a.jsx("canvas",{ref:s}),a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Series"}),a.jsx("th",{children:"CAGR"}),a.jsx("th",{children:"Vol"}),a.jsx("th",{children:"Sharpe"}),a.jsx("th",{children:"Max DD"})]})}),a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{children:_?.name??"—"}),a.jsx("td",{children:P.cagr}),a.jsx("td",{children:P.vol}),a.jsx("td",{children:P.sharpe}),a.jsx("td",{children:P.mdd})]}),T&&a.jsxs("tr",{children:[a.jsx("td",{children:"S&P 500 (SPX)"}),a.jsx("td",{children:T.cagr}),a.jsx("td",{children:T.vol}),a.jsx("td",{children:T.sharpe}),a.jsx("td",{children:T.mdd})]})]})]}),C&&a.jsxs("div",{className:"note",children:[a.jsx("h3",{children:C.title}),C.body.split(`

`).map((t,d)=>a.jsx("p",{children:t},d))]}),a.jsx("style",{children:`
        .mg{display:grid;gap:12px}
        .bar{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
        .bar label{font-size:.95rem;color:#333}
        .bar select{margin-left:.4rem}
        canvas{width:100%;height:auto;background:#fff;border:1px solid var(--border);border-radius:10px}
        .table{width:100%;border-collapse:separate;border-spacing:0;border:1px solid var(--border);border-radius:10px;overflow:hidden;background:#fff;margin-top:4px}
        .table thead th{background:#fafafa;text-align:left;padding:.55rem .7rem;border-bottom:1px solid var(--border)}
        .table tbody td{padding:.55rem .7rem;border-bottom:1px solid var(--border)}
        .table tbody tr:last-child td{border-bottom:0}
        .note{background:#fff;border:1px solid var(--border);border-radius:10px;padding:12px}
        .note h3{margin:.2rem 0 .35rem;font-size:1.05rem}
        .note p{margin:.35rem 0;color:#333}
      `})]})}export{de as default};

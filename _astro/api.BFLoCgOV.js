const i=()=>(typeof document<"u"&&document.querySelector("base")?.getAttribute("href")||"/").replace(/\/+$/,"/"),l=t=>(i()+t.replace(/^\//,"")).replace(/([^:]\/)\/+/g,"$1");async function n(t,a="no-cache"){try{const r=await fetch(l(t),{cache:a});return r.ok?await r.json():null}catch{return null}}let s=null;async function o(){if(s)return s;const t=await n("/data/daily/latest.json"),a=t?.date?null:await n("/data/latest.json");return s=t?.date??a?.date??null,s}const c=(t,a)=>a?`${t}?v=${encodeURIComponent(a)}`:t;async function g(t){const a=t??await o();return await n(c(`/data/daily/${a}/model_selection.json`,a))}async function d(t){const a=t??await o();return await n(c(`/data/daily/${a}/top_drivers.json`,a))}async function u(t){const a=t??await o();return await n(c(`/data/daily/${a}/ticker_leaderboard.json`,a))}async function f(t){const a=t??await o();return await n(c(`/data/daily/${a}/sector_health.json`,a))}async function w(t="eqx-m1"){return await n(`/data/models/${t}/sector_perf.json`)}async function m(t,a="eqx-m1"){const r=t??await o(),e=await d(r);return e?.drivers?.length?e:await n(`/data/models/${a}/top_drivers.json`)}async function p(t,a="eqx-m1"){const r=t??await o(),e=await u(r);return e?.top?.length?e:await n(`/data/models/${a}/ticker_leaderboard.json`)}async function h(t,a="eqx-m1"){const r=t??await o(),e=await f(r);return e?.sectors?.length||e?.leaders?.length?{daily:e,modelPerf:null}:{daily:null,modelPerf:await w(a)??null}}export{g as a,h as b,m as c,o as g,p as s};

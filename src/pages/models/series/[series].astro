---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
const { series } = Astro.params;

const all = await getCollection("models");
const items = all
  .filter(m => m.data.series === series)
  .sort((a,b) => (a.data.mark ?? 0) - (b.data.mark ?? 0));

// Series display names
const titles: Record<string,string> = {
  "eq-core": "EQ Core Series",
  "eq-sentinel": "EQ Sentinel Series",
  "eq-tbd": "Future Series",
};
const seriesTitle = titles[String(series)] ?? "Models";
---
<BaseLayout title={`${seriesTitle} · EireQuant`}>
  <h1>{seriesTitle}</h1>
  <p class="lead">All marks within this series.</p>

  <div class="cards">
    {items.map(({ data }) => (
      <a class="card" href={`/models/${data.slug}/`}>
        <div class="kicker">MK {data.mark} · {data.version ?? "v1.0.0"}</div>
        <h3>{data.title}</h3>
        <p>{data.summary ?? "Model description coming soon."}</p>
      </a>
    ))}
  </div>

  <style>
    .lead{ color:#555; margin-bottom:1rem;}
    .cards{ display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:1rem;}
    .card{ border:1px solid #eee; padding:1rem; border-radius:12px; background:#fff;}
    .card:hover{ border-color:#ddd; box-shadow:0 8px 24px rgba(0,0,0,.06);}
    .kicker{ font-size:.85rem; color:#666; margin-bottom:.25rem; text-transform:uppercase; letter-spacing:.04em;}
  </style>
</BaseLayout>

---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import modelSeries from "../../../lib/modelSeries";

const { series = "" } = Astro.params;
const meta = modelSeries.find(s => s.slug === series) ?? { title: series, subtitle:"" };
const all = await getCollection("models");
const items = all.filter(m => m.data.series === series).sort((a,b)=>(a.data.mark ?? 0) - (b.data.mark ?? 0));
export const prerender = true;
---
<BaseLayout title={`${meta.title} · Models · EireQuant`} description={meta.subtitle ?? "Model family"}>
  <section class="card">
    <h1 class="h1">{meta.title}</h1>
    {meta.subtitle && <p class="muted">{meta.subtitle}</p>}
  </section>

  {items.length ? (
    <section class="grid">
      {items.map(({ data }) => (
        <a class="tile" href={`/models/${data.slug}/`}>
          <div class="tile-h">Mk {data.mark} · {data.version ?? "v1.0.0"} · {data.status ?? "research"}</div>
          <div class="tile-sub">{data.title}</div>
          <div class="tile-cta">Open →</div>
        </a>
      ))}
    </section>
  ) : (
    <section class="card"><p class="muted">No marks published yet.</p></section>
  )}

  <style>
    .card{ border:2px solid #d7d7d7; padding:16px; background:#fff; border-radius:6px; }
    .h1{ font-family: Georgia, 'Times New Roman', serif; margin:0 0 6px 0; }
    .muted{ color:#6b6b6b; }
    .grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(320px,1fr)); gap:16px; }
    .tile{ display:block; text-decoration:none; color:inherit; border:2px solid #d7d7d7; border-radius:6px; background:#fff; padding:16px; min-height:120px; }
    .tile-h{ font-weight:700; margin-bottom:6px; }
    .tile-sub{ color:#333; }
    .tile-cta{ margin-top:12px; font-weight:600; color:#0645ad; }
  </style>
</BaseLayout>

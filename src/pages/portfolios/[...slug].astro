---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

// ðŸ”§ enumerate portfolio pages
export async function getStaticPaths() {
  const entries = await getCollection("portfolios");
  return entries.map((p) => ({ params: { slug: p.slug } }));
}

const { slug = "" } = Astro.params;
const entries = await getCollection("portfolios");
const entry = entries.find((p) => p.slug === slug);
if (!entry) throw new Error(`Portfolio not found: ${slug}`);

const { Content } = await entry.render();
---

<BaseLayout title={`${entry.data.title} Â· Portfolio Â· EireQuant`} description={entry.data.summary ?? "Portfolio details"}>
  <section class="card">
    <h1 class="h1">{entry.data.title}</h1>
    {entry.data.summary && <p class="muted">{entry.data.summary}</p>}
  </section>

  <section class="card">
    <h2 class="h2">Allocation</h2>
    <p>Allocation details coming soon (weights, caps, rebalance policy).</p>
  </section>

  <section class="card">
    <h2 class="h2">Notes</h2>
    <Content />
  </section>

  <style>
    .card{ border:2px solid #d7d7d7; padding:16px; background:#fff; border-radius:6px; }
    .h1,.h2{ font-family: Georgia, 'Times New Roman', serif; margin:0 0 6px 0; }
    .muted{ color:#6b6b6b; }
  </style>
</BaseLayout>
